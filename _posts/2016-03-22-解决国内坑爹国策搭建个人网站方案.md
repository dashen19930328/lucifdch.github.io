---
layout:     post
title:      "解决国内坑爹国策搭建个人网站方案"
subtitle:   "客户端不懂你们后台的破事儿"
date:       2016-03-22
author:     "Lucifd"
header-img: "img/header-post/2016-03-22-02.jpg"
tags:
    - 网站
    - 杂记
---

> 版权声明：本文为博主原创文章，未经博主允许不得转载。

# 解决国内坑爹国策搭建个人网站方案

## 域名
域名若在国内的供应商出申请，则必须备案，备案一来一回需要等待20天以上，还不包括中间的意外情况。但提供了访问较为迅速的DNS服务，以及价格上来说还是比较亲民，且阿里云必须使用已备案的域名才能进行访问。

若使用国外（本人使用[godaddy](godaddy.com)）价格会稍微比国内高几块钱。不需要备案，对服务器没有要求，相应的DNS服务器在国外可能访问速度会慢一点（访问量不高的话其实差不多）。

出于综合考虑（其实我买了万网的域名以及godaddy的域名算交了学费）我选择了万网，因为国内ASDL是随机IP+封锁80端口双重坑爹政策，具体原因下文再说。

## 服务器
说是个人网站自己搭服务器，但国的运营商将80端口封杀让IDC赚钱，没法子得买一个国内的云或使用公司已注册的服务器作为nginx反向代理（我使用的是后者）。

## 花生壳
由于国内ASDL的IP和共产党一样一天变一个脸，且免费花生壳时常连接超时，故买了个专业版的花生壳。要强调的一点是别在花生壳买顶级域名，别被70/年的顶级域名带DDNS服务的选项骗了，试了一下不好使，而且平白无故买了个域名十分浪费，买个18/年的壳域名就好了。

## 搭建方案

1. 找个已备案的服务器
2. 注册万网域名
3. 将万网域名映射到备案服务器上
4. 备案服务器做反向代理
5. 反向代理代理到花生壳指定的其丑无比的网址
6. 自己的服务器进行处理

这儿说下若是万网域名+花生壳+私服这套方案，80端口被封，CNANME不能在域名后边跟上端口号，只能使用URL跳转且跟根域名无法指定端口号（花生壳域名如此，万网则是所有都无法指定），若使用URL跳转其他界面在游览器上还是会显示奇丑无比花生壳域名。

而域名若选用godaddy那么云服务只能使用国外（没对其他的IDC供应商做调查，至少阿里云如此）国内云服务限制了域名必须备案才能进行处理。反之若选用国内域名则服务器必须备案。

总的来说要想通过域名而不是`域名:端口`访问网站一台不限制80端口的服务器必不可少，且组合一定是固定的即国外域名供应商要对应国外服务器，国内域名供应商要对应国内服务器。

## 学费

项目名|价格
godaddy域名|79￥
阿里域名 |130￥|
花生壳域名| 125￥|
花生壳壳域名 |18￥| 
阿里云服务器 |250￥|
总支出 | <font color='red'>352￥<font>